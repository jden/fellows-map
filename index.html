<!doctype html>
<html lang="en">
 
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script type="text/javascript" src="fellows_data.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/0.4.0/MarkerCluster.Default.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/0.4.0/MarkerCluster.css">
    <script src="js/markercluster.js"></script>
    <style>
    body {
      background-color: Fuchsia;
      margin: 0;
      padding: 0;
    }
    #map {
    	position: absolute;
      width:100%;
      height:100%;
      background-color:#c0c0c0; /* just to ensure the element is there */
    }
    .fellow-marker {
      text-align:center;
    }
    .fellow-marker-name {
      width:200px;
      color:white;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
      margin:20px;
    }
    </style>
 
</head>
 
<body>
	<div id="map"></div>

  <script>
    //initialize the map
    var map = L.map('map').setView([47.65, -122.4], 11);

    //Add a basemap
    L.tileLayer('http://{s}.tiles.mapbox.com/v3/spatialdev.map-c9z2cyef/{z}/{x}/{y}.png').addTo(map); 

    var geoJson= L.geoJson(fellowsdata, {
      onEachFeature: onEachFeature,
      pointToLayer: function (feature, latlng) {
        console.log(feature);
        return L.marker(latlng, {
          icon: L.divIcon({
            className: 'fellow-marker',
            iconAnchor: [100, 0],
            html: '<span class="fellow-marker-name">'+feature.properties.Name+'</span>'
          })
        })
      }
    });
    function onEachFeature(feature, layer) {
      var info = feature.properties;

      var popupContent = info.Name;
      if (info && info.Name) {
          layer.bindPopup(popupContent);
      }
    }
  	var markers = L.markerClusterGroup({
      showCoverageOnHover: false,
      spiderfyOnMaxZoom: true
    });
  	markers.addLayer(geoJson);
  	map.addLayer(markers);
  	map.fitBounds(markers.getBounds());
  </script>
</body>
</html>
